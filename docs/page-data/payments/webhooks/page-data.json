{"componentChunkName":"component---src-templates-post-template-js","path":"/payments/webhooks/","result":{"data":{"mdx":{"body":"function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\n/* @jsxRuntime classic */\n\n/* @jsx mdx */\nvar _frontmatter = {\n  \"title\": \"Webhooks\",\n  \"date\": \"2019-01-24T00:00:00.000Z\",\n  \"published\": true\n};\n\nvar makeShortcode = function makeShortcode(name) {\n  return function MDXDefaultShortcode(props) {\n    console.warn(\"Component \" + name + \" was not imported, exported, or provided by MDXProvider as global scope\");\n    return mdx(\"div\", props);\n  };\n};\n\nvar Link = makeShortcode(\"Link\");\nvar Callout = makeShortcode(\"Callout\");\nvar OrderedList = makeShortcode(\"OrderedList\");\nvar Tabs = makeShortcode(\"Tabs\");\nvar RequestResponse = makeShortcode(\"RequestResponse\");\nvar TabsMulti = makeShortcode(\"TabsMulti\");\nvar layoutProps = {\n  _frontmatter: _frontmatter\n};\nvar MDXLayout = \"wrapper\";\nreturn function MDXContent(_ref) {\n  var components = _ref.components,\n      props = _objectWithoutProperties(_ref, [\"components\"]);\n\n  return mdx(MDXLayout, _extends({}, layoutProps, props, {\n    components: components,\n    mdxType: \"MDXLayout\"\n  }), mdx(\"header\", null, mdx(\"h1\", null, \"Webhooks\"), mdx(\"p\", null, \"Learn how to listen to events whenever certain actions occur on your integration.\")), mdx(\"h2\", {\n    \"id\": \"what-are-webhooks\",\n    \"style\": {\n      \"position\": \"relative\"\n    }\n  }, mdx(\"a\", _extends({\n    parentName: \"h2\"\n  }, {\n    \"href\": \"#what-are-webhooks\",\n    \"aria-label\": \"what are webhooks permalink\",\n    \"className\": \"anchor before\"\n  }), mdx(\"svg\", _extends({\n    parentName: \"a\"\n  }, {\n    \"aria-hidden\": \"true\",\n    \"focusable\": \"false\",\n    \"height\": \"16\",\n    \"version\": \"1.1\",\n    \"viewBox\": \"0 0 16 16\",\n    \"width\": \"16\"\n  }), mdx(\"path\", _extends({\n    parentName: \"svg\"\n  }, {\n    \"fillRule\": \"evenodd\",\n    \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n  })))), \"What are webhooks?\"), mdx(\"p\", null, \"Whenever certain transaction actions occur on your Paystack integration, we trigger events which your application can listen to. This is where webhooks come in. A webhook is a URL on your server where we send payloads for such events. For example, if you implement webhooks, once a payment is successful, we will immediately notify your server with a \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"charge.success\"), \" event. Here is a \", mdx(Link, {\n    to: \"/payments/webhooks#supported-events\",\n    mdxType: \"Link\"\n  }, \"list of events\"), \" we can send to your webhook URL.\"), mdx(Callout, {\n    type: \"info\",\n    title: \"Helpful Tip\",\n    mdxType: \"Callout\"\n  }, \"We recommend that you use webhook to provide value to your customers over using a callback. Callbacks can fail if the network connection on a customer's device fails or is weak or if the device goes off after a transaction and several other situations that are outside both our and your control.\"), mdx(\"p\", null, \"You can specify your webhook URL \", mdx(\"a\", {\n    href: \"https://dashboard.paystack.com/#/settings/developer\",\n    target: \"_blank\",\n    rel: \"noopener noreferrer\"\n  }, \"on your dashboard\"), \" where we would send \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"POST\"), \" requests to whenever an event occurs.\"), mdx(\"p\", null, mdx(\"strong\", null, \"Here are some things to note when setting up a  webhook URL\"), \":\"), mdx(OrderedList, {\n    items: [mdx(\"span\", null, \"If using \", mdx(\"code\", null, \".htaccess\"), \", remember to add the trailing \", mdx(\"code\", null, \"/\"), \" to the url you set.\"), mdx(\"span\", null, \"Do a test post to your URL and ensure the script gets the post body.\"), mdx(\"span\", null, \"Ensure your webhook URL is publicly available (localhost URLs cannot receive events)\")],\n    mdxType: \"OrderedList\"\n  }), mdx(\"h2\", {\n    \"id\": \"receiving-an-event\",\n    \"style\": {\n      \"position\": \"relative\"\n    }\n  }, mdx(\"a\", _extends({\n    parentName: \"h2\"\n  }, {\n    \"href\": \"#receiving-an-event\",\n    \"aria-label\": \"receiving an event permalink\",\n    \"className\": \"anchor before\"\n  }), mdx(\"svg\", _extends({\n    parentName: \"a\"\n  }, {\n    \"aria-hidden\": \"true\",\n    \"focusable\": \"false\",\n    \"height\": \"16\",\n    \"version\": \"1.1\",\n    \"viewBox\": \"0 0 16 16\",\n    \"width\": \"16\"\n  }), mdx(\"path\", _extends({\n    parentName: \"svg\"\n  }, {\n    \"fillRule\": \"evenodd\",\n    \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n  })))), \"Receiving an event\"), mdx(\"p\", null, \"All you have to do to receive the event is to create an unauthenticated \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"POST\"), \" route on your application. The event object is sent as JSON in the request body.\"), mdx(Tabs, {\n    links: {\n      js: \"Node\",\n      php: \"PHP\"\n    },\n    filepath: \"/payments/webhooks/receiving-events.js\",\n    mdxType: \"Tabs\"\n  }), mdx(\"h2\", {\n    \"id\": \"verifying-events\",\n    \"style\": {\n      \"position\": \"relative\"\n    }\n  }, mdx(\"a\", _extends({\n    parentName: \"h2\"\n  }, {\n    \"href\": \"#verifying-events\",\n    \"aria-label\": \"verifying events permalink\",\n    \"className\": \"anchor before\"\n  }), mdx(\"svg\", _extends({\n    parentName: \"a\"\n  }, {\n    \"aria-hidden\": \"true\",\n    \"focusable\": \"false\",\n    \"height\": \"16\",\n    \"version\": \"1.1\",\n    \"viewBox\": \"0 0 16 16\",\n    \"width\": \"16\"\n  }), mdx(\"path\", _extends({\n    parentName: \"svg\"\n  }, {\n    \"fillRule\": \"evenodd\",\n    \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n  })))), \"Verifying events\"), mdx(\"p\", null, \"It is important to verify that events originate from Paystack to avoid delivering value based on a countefeit event.\"), mdx(\"p\", null, \"You can do any or both of the below to verify events from Paystack:\"), mdx(OrderedList, {\n    items: [mdx(\"span\", null, \"Validate the Signature - Valid events are raised with an header \", mdx(\"code\", null, \"X-Paystack-Signature\"), \" which is essentially a \", mdx(\"code\", null, \"HMAC SHA512\"), \" signature of the event payload signed using your secret key.\"), mdx(\"span\", null, \"Watch the IPs - We only call your webhooks from these IPs: \", mdx(\"code\", null, \"52.31.139.75\"), \", \", mdx(\"code\", null, \"52.49.173.169\"), \", \", mdx(\"code\", null, \"52.214.14.220\"))],\n    mdxType: \"OrderedList\"\n  }), mdx(\"p\", null, \"You can whitelist these IPs. Any webhook from outside of these can safely be considered counterfeit.\"), mdx(RequestResponse, {\n    links: {\n      js: \"Node\",\n      php: \"PHP\",\n      java: \"Java\",\n      csharp: \"C#\"\n    },\n    filepath: \"/payments/webhooks/verifying-transactions.js\",\n    mdxType: \"RequestResponse\"\n  }), mdx(\"h2\", {\n    \"id\": \"responding-to-an-event\",\n    \"style\": {\n      \"position\": \"relative\"\n    }\n  }, mdx(\"a\", _extends({\n    parentName: \"h2\"\n  }, {\n    \"href\": \"#responding-to-an-event\",\n    \"aria-label\": \"responding to an event permalink\",\n    \"className\": \"anchor before\"\n  }), mdx(\"svg\", _extends({\n    parentName: \"a\"\n  }, {\n    \"aria-hidden\": \"true\",\n    \"focusable\": \"false\",\n    \"height\": \"16\",\n    \"version\": \"1.1\",\n    \"viewBox\": \"0 0 16 16\",\n    \"width\": \"16\"\n  }), mdx(\"path\", _extends({\n    parentName: \"svg\"\n  }, {\n    \"fillRule\": \"evenodd\",\n    \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n  })))), \"Responding to an event\"), mdx(\"p\", null, \"You should respond to an event with a \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"200 OK\"), \". We consider this an acknowledgement by your application. If your application responds with any status outside of the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"2xx\"), \" range, we will consider it unacknowledged and thus, continue to send it every hour for 72 hours. You don't need to send a request body or some other parameter as it would be discarded - we only pay attention to the status code.\"), mdx(\"p\", null, \"If your application is likely to start a long running task in response to the event, Paystack may timeout waiting for the response and would ultimately consider the event unacknowledged and queue to be raised later. You can mitigate duplicity by having your application respond immediately with a 200 before it goes on to perform the rest of the task.\"), mdx(\"h2\", {\n    \"id\": \"supported-events\",\n    \"style\": {\n      \"position\": \"relative\"\n    }\n  }, mdx(\"a\", _extends({\n    parentName: \"h2\"\n  }, {\n    \"href\": \"#supported-events\",\n    \"aria-label\": \"supported events permalink\",\n    \"className\": \"anchor before\"\n  }), mdx(\"svg\", _extends({\n    parentName: \"a\"\n  }, {\n    \"aria-hidden\": \"true\",\n    \"focusable\": \"false\",\n    \"height\": \"16\",\n    \"version\": \"1.1\",\n    \"viewBox\": \"0 0 16 16\",\n    \"width\": \"16\"\n  }), mdx(\"path\", _extends({\n    parentName: \"svg\"\n  }, {\n    \"fillRule\": \"evenodd\",\n    \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n  })))), \"Supported events\"), mdx(TabsMulti, {\n    language: \"json\",\n    links: {\n      customer_id_failed: \"Customer Identification Failed\",\n      customer_id_success: \"Customer Identification Successful\",\n      charge_dispute_create: \"Dispute Created\",\n      charge_dispute_remind: \"Dispute Reminder\",\n      charge_dispute_resolve: \"Dispute Resolved\",\n      invoice_created: \"Invoice Created\",\n      invoice_failed: \"Invoice Failed\",\n      invoice_updated: \"Invoice Updated\",\n      payment_request_pending: \"Payment Request Pending\",\n      payment_request_success: \"Payment Request Successful\",\n      subscription_created: \"Subscription Created\",\n      subscription_disable: \"Subscription Disabled\",\n      transaction_successful: \"Transaction Successful\",\n      transfer_successful: \"Transfer Successful\",\n      transfer_failed: \"Transfer Failed\",\n      transfer_reversed: \"Transfer Reversed\"\n    },\n    filepath: \"/payments/webhooks/events.js\",\n    mdxType: \"TabsMulti\"\n  }), mdx(\"h2\", {\n    \"id\": \"types-of-events\",\n    \"style\": {\n      \"position\": \"relative\"\n    }\n  }, mdx(\"a\", _extends({\n    parentName: \"h2\"\n  }, {\n    \"href\": \"#types-of-events\",\n    \"aria-label\": \"types of events permalink\",\n    \"className\": \"anchor before\"\n  }), mdx(\"svg\", _extends({\n    parentName: \"a\"\n  }, {\n    \"aria-hidden\": \"true\",\n    \"focusable\": \"false\",\n    \"height\": \"16\",\n    \"version\": \"1.1\",\n    \"viewBox\": \"0 0 16 16\",\n    \"width\": \"16\"\n  }), mdx(\"path\", _extends({\n    parentName: \"svg\"\n  }, {\n    \"fillRule\": \"evenodd\",\n    \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n  })))), \"Types of events\"), mdx(\"p\", null, \"Here are the events we currently raise. We would add more to this list as we hook into more actions in the future.\"), mdx(\"table\", null, mdx(\"thead\", null, mdx(\"tr\", null, mdx(\"th\", null, \"Event\"), mdx(\"th\", null, \"Description\"))), mdx(\"tbody\", null, mdx(\"tr\", null, mdx(\"td\", null, \"charge.dispute.create\"), mdx(\"td\", null, \"A dispute was logged against your business\")), mdx(\"tr\", null, mdx(\"td\", null, \"charge.dispute.remind\"), mdx(\"td\", null, \"A logged dispute has not been resolved\")), mdx(\"tr\", null, mdx(\"td\", null, \"charge.dispute.resolve\"), mdx(\"td\", null, \"A dispute has been resolved\")), mdx(\"tr\", null, mdx(\"td\", null, \"charge.success\"), mdx(\"td\", null, \"A successful charge was made\")), mdx(\"tr\", null, mdx(\"td\", null, \"customeridentification.failed\"), mdx(\"td\", null, \"A customer ID validation has failed\")), mdx(\"tr\", null, mdx(\"td\", null, \"customeridentification.success\"), mdx(\"td\", null, \"A customer ID validation was successful\")), mdx(\"tr\", null, mdx(\"td\", null, \"invoice.create\"), mdx(\"td\", null, \"An invoice has been created for a subscription on your account. This usually happens 3 days before the subscription is due or whenever we send the customer their first pending invoice notification\")), mdx(\"tr\", null, mdx(\"td\", null, \"invoice.payment_failed\"), mdx(\"td\", null, \"A payment for an invoice failed\")), mdx(\"tr\", null, mdx(\"td\", null, \"invoice.update\"), mdx(\"td\", null, \"An invoice has been updated. This usually means we were able to charge the customer successfully. You should inspect the invoice object returned and take necessary action\")), mdx(\"tr\", null, mdx(\"td\", null, \"paymentrequest.pending\"), mdx(\"td\", null, \"A payment request has been sent to a customer\")), mdx(\"tr\", null, mdx(\"td\", null, \"paymentrequest.success\"), mdx(\"td\", null, \"A payment request has been paid for\")), mdx(\"tr\", null, mdx(\"td\", null, \"subscription.create\"), mdx(\"td\", null, \"A subscription has been created\")), mdx(\"tr\", null, mdx(\"td\", null, \"subscription.disable\"), mdx(\"td\", null, \"A subscription on your account has been disabled\")), mdx(\"tr\", null, mdx(\"td\", null, \"subscription.enable\"), mdx(\"td\", null, \"A subscription on your account has been enabled\")), mdx(\"tr\", null, mdx(\"td\", null, \"transfer.failed\"), mdx(\"td\", null, \"A transfer you attempted has failed\")), mdx(\"tr\", null, mdx(\"td\", null, \"transfer.success\"), mdx(\"td\", null, \"A successful transfer has been completed\")), mdx(\"tr\", null, mdx(\"td\", null, \"transfer.reversed\"), mdx(\"td\", null, \"A transfer you attempted has been reversed\")))));\n}\n;\nMDXContent.isMDXComponent = true;","tableOfContents":{"items":[{"url":"#what-are-webhooks","title":"What are webhooks?"},{"url":"#receiving-an-event","title":"Receiving an event"},{"url":"#verifying-events","title":"Verifying events"},{"url":"#responding-to-an-event","title":"Responding to an event"},{"url":"#supported-events","title":"Supported events"},{"url":"#types-of-events","title":"Types of events"}]},"fields":{"slug":"/payments/webhooks/"},"frontmatter":{"title":"Webhooks"}}},"pageContext":{"slug":"/payments/webhooks/"}},"staticQueryHashes":["2577489308"]}