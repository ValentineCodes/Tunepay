{"componentChunkName":"component---src-templates-post-template-js","path":"/guides/using_the_paystack_checkout_in_a_mobile_webview/","result":{"data":{"mdx":{"body":"function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\n/* @jsxRuntime classic */\n\n/* @jsx mdx */\nvar _frontmatter = {\n  \"title\": \"Guides -  Using the Paystack Checkout in a Mobile WebView\",\n  \"date\": \"2021-01-15T00:00:00.000Z\",\n  \"published\": true\n};\n\nvar makeShortcode = function makeShortcode(name) {\n  return function MDXDefaultShortcode(props) {\n    console.warn(\"Component \" + name + \" was not imported, exported, or provided by MDXProvider as global scope\");\n    return mdx(\"div\", props);\n  };\n};\n\nvar OrderedList = makeShortcode(\"OrderedList\");\nvar Link = makeShortcode(\"Link\");\nvar Callout = makeShortcode(\"Callout\");\nvar ApiLink = makeShortcode(\"ApiLink\");\nvar RequestResponse = makeShortcode(\"RequestResponse\");\nvar Tabs = makeShortcode(\"Tabs\");\nvar layoutProps = {\n  _frontmatter: _frontmatter\n};\nvar MDXLayout = \"wrapper\";\nreturn function MDXContent(_ref) {\n  var components = _ref.components,\n      props = _objectWithoutProperties(_ref, [\"components\"]);\n\n  return mdx(MDXLayout, _extends({}, layoutProps, props, {\n    components: components,\n    mdxType: \"MDXLayout\"\n  }), mdx(\"header\", null, mdx(\"h1\", null, \"Using the Paystack Checkout in a Mobile WebView\")), mdx(\"h2\", {\n    \"id\": \"introduction\",\n    \"style\": {\n      \"position\": \"relative\"\n    }\n  }, mdx(\"a\", _extends({\n    parentName: \"h2\"\n  }, {\n    \"href\": \"#introduction\",\n    \"aria-label\": \"introduction permalink\",\n    \"className\": \"anchor before\"\n  }), mdx(\"svg\", _extends({\n    parentName: \"a\"\n  }, {\n    \"aria-hidden\": \"true\",\n    \"focusable\": \"false\",\n    \"height\": \"16\",\n    \"version\": \"1.1\",\n    \"viewBox\": \"0 0 16 16\",\n    \"width\": \"16\"\n  }), mdx(\"path\", _extends({\n    parentName: \"svg\"\n  }, {\n    \"fillRule\": \"evenodd\",\n    \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n  })))), \"Introduction\"), mdx(\"p\", null, \"When it comes to accepting payments with Paystack in your mobile applications, there are two ways to go about it:\"), mdx(OrderedList, {\n    items: [mdx(\"span\", null, mdx(\"strong\", null, \"Using the Paystack library built for your tech stack of choice\"), \" - You can integrate Paystack directly into your Android or iOS app using our mobile SDK. For mobile frameworks like Ionic or React Native, please find the libraries \", mdx(Link, {\n      to: \"/libraries-and-plugins/libraries/#community-maintained\",\n      mdxType: \"Link\"\n    }, \"here\"), \". \"), mdx(\"span\", null, mdx(\"strong\", null, \"Using a WebView\"), \" - You can also generate a checkout URL  and embed it in a WebView on your mobile application. We'll be covering this option in this guide. \")],\n    mdxType: \"OrderedList\"\n  }), mdx(Callout, {\n    type: \"info\",\n    title: \"Code snippets\",\n    mdxType: \"Callout\"\n  }, \"For the purposes of this guide, we'll include sample code for mobile apps built using Flutter, React Native, native Android, and iOS, but the flow described works for all the mobile app development stacks\"), mdx(\"h2\", {\n    \"id\": \"why-use-a-webview\",\n    \"style\": {\n      \"position\": \"relative\"\n    }\n  }, mdx(\"a\", _extends({\n    parentName: \"h2\"\n  }, {\n    \"href\": \"#why-use-a-webview\",\n    \"aria-label\": \"why use a webview permalink\",\n    \"className\": \"anchor before\"\n  }), mdx(\"svg\", _extends({\n    parentName: \"a\"\n  }, {\n    \"aria-hidden\": \"true\",\n    \"focusable\": \"false\",\n    \"height\": \"16\",\n    \"version\": \"1.1\",\n    \"viewBox\": \"0 0 16 16\",\n    \"width\": \"16\"\n  }), mdx(\"path\", _extends({\n    parentName: \"svg\"\n  }, {\n    \"fillRule\": \"evenodd\",\n    \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n  })))), \"Why use a WebView?\"), mdx(\"p\", null, \"There are different reasons to consider using the hosted checkout in a WebView over integrating directly with the mobile SDK. Regardless of which method you choose, the payments are still being processed by the same underlying APIs. The only difference is the payment experience you'll be offering to your customers. Some of the pros of using a WebView are:\"), mdx(OrderedList, {\n    items: [mdx(\"span\", null, \"By using our hosted checkout, the entire payment experience is controlled by Paystack. This means you don't have to build a checkout UI in your mobile application to accept payments, hence less code is required to integrate payments in your app.\"), mdx(\"span\", null, \"While only card payments are available on the mobile SDK, all other non-card payment types - such as bank transfer, USSD, Visa QR, Mobile Money, and Pay-with-Bank - are available on the checkout, and therefore available to the customer.\")],\n    mdxType: \"OrderedList\"\n  }), mdx(Callout, {\n    type: \"info\",\n    title: \"Integration Options\",\n    mdxType: \"Callout\"\n  }, \"You can still accept payments via card on mobile if you're not using a WebView. All channels are available directly on the \", mdx(Link, {\n    to: \"/payments/payment-channels/\",\n    mdxType: \"Link\"\n  }, \"API\"), \" and can be integrated into your application.\"), mdx(\"h2\", {\n    \"id\": \"generating-the-checkout-url\",\n    \"style\": {\n      \"position\": \"relative\"\n    }\n  }, mdx(\"a\", _extends({\n    parentName: \"h2\"\n  }, {\n    \"href\": \"#generating-the-checkout-url\",\n    \"aria-label\": \"generating the checkout url permalink\",\n    \"className\": \"anchor before\"\n  }), mdx(\"svg\", _extends({\n    parentName: \"a\"\n  }, {\n    \"aria-hidden\": \"true\",\n    \"focusable\": \"false\",\n    \"height\": \"16\",\n    \"version\": \"1.1\",\n    \"viewBox\": \"0 0 16 16\",\n    \"width\": \"16\"\n  }), mdx(\"path\", _extends({\n    parentName: \"svg\"\n  }, {\n    \"fillRule\": \"evenodd\",\n    \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n  })))), \"Generating the checkout URL\"), mdx(\"p\", null, \"The first step in the integration is to initialize the transaction to get a checkout URL.\"), mdx(\"p\", null, \"When a customer clicks the payment action button, initialize a transaction by making a POST request from your server, to our API. Pass the email, amount, and any other optional parameters to the\\xA0\", mdx(ApiLink, {\n    title: \"Initialize Transaction\",\n    path: \"transaction-initialize\",\n    mdxType: \"ApiLink\"\n  }), \" endpoint.\"), mdx(RequestResponse, {\n    links: {\n      bash: \"cURL\",\n      js: \"Node\",\n      php: \"PHP\"\n    },\n    filepath: \"/payments/accept-payment/redirect-backend.js\",\n    mdxType: \"RequestResponse\"\n  }), mdx(\"h2\", {\n    \"id\": \"displaying-checkout-in-your-webview\",\n    \"style\": {\n      \"position\": \"relative\"\n    }\n  }, mdx(\"a\", _extends({\n    parentName: \"h2\"\n  }, {\n    \"href\": \"#displaying-checkout-in-your-webview\",\n    \"aria-label\": \"displaying checkout in your webview permalink\",\n    \"className\": \"anchor before\"\n  }), mdx(\"svg\", _extends({\n    parentName: \"a\"\n  }, {\n    \"aria-hidden\": \"true\",\n    \"focusable\": \"false\",\n    \"height\": \"16\",\n    \"version\": \"1.1\",\n    \"viewBox\": \"0 0 16 16\",\n    \"width\": \"16\"\n  }), mdx(\"path\", _extends({\n    parentName: \"svg\"\n  }, {\n    \"fillRule\": \"evenodd\",\n    \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n  })))), \"Displaying Checkout in Your WebView\"), mdx(\"p\", null, \"If the API call is successful, Paystack will return an authorization URL in the response. This URL should be returned to the frontend application, and loaded in the Webview widget. See the sample code below:\"), mdx(Tabs, {\n    links: {\n      dart: \"Flutter\",\n      js: \"React Native\",\n      kotlin: \"Kotlin\",\n      swift: \"Swift\"\n    },\n    filepath: \"/guides/checkout_webview/initialize_webview.js\",\n    mdxType: \"Tabs\"\n  }), mdx(Callout, {\n    type: \"info\",\n    title: \"Enable JavaScript on Flutter\",\n    mdxType: \"Callout\"\n  }, \"Javascript needs to be enabled in the WebView for the checkout to load properly.\"), mdx(Callout, {\n    type: \"warning\",\n    title: \"iOS Deprecation Notice\",\n    mdxType: \"Callout\"\n  }, mdx(\"p\", null, \"UIWebView has been deprecated in iOS 12.0 so for this guide we will use WKWebView.\"), mdx(\"p\", null, \"We assume you have WKWebView in your storyboard in the view controller in which you want to show the checkout.\")), mdx(\"p\", null, \"Once the checkout is loaded in the WebView, you'll need to listen for customer actions. That is, you'll want to know when the customer completes the payment or closes the checkout page. This can be done by listening for URL redirects in the WebView widget. \"), mdx(\"h2\", {\n    \"id\": \"handling-webview-redirects\",\n    \"style\": {\n      \"position\": \"relative\"\n    }\n  }, mdx(\"a\", _extends({\n    parentName: \"h2\"\n  }, {\n    \"href\": \"#handling-webview-redirects\",\n    \"aria-label\": \"handling webview redirects permalink\",\n    \"className\": \"anchor before\"\n  }), mdx(\"svg\", _extends({\n    parentName: \"a\"\n  }, {\n    \"aria-hidden\": \"true\",\n    \"focusable\": \"false\",\n    \"height\": \"16\",\n    \"version\": \"1.1\",\n    \"viewBox\": \"0 0 16 16\",\n    \"width\": \"16\"\n  }), mdx(\"path\", _extends({\n    parentName: \"svg\"\n  }, {\n    \"fillRule\": \"evenodd\",\n    \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n  })))), \"Handling WebView Redirects\"), mdx(Callout, {\n    type: \"info\",\n    title: \"Allow Redirect\",\n    mdxType: \"Callout\"\n  }, \"Redirects should be allowed in the WebView widget to allow for bank and 3DS authorization. If the WebView blocks redirects, the customer will not be able to complete the transaction.\"), mdx(\"p\", null, \"When customers complete the payment successfully, they are redirected to the callback URL set in your Paystack dashboard. You can override this, however, by passing a \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"callback_url\"), \" when initializing the transaction. This will override the callback URL set on your dashboard, and the customer will be redirected there instead. The WebView widget should now look like this\"), mdx(Tabs, {\n    links: {\n      dart: \"Flutter\",\n      js: \"React Native\",\n      kotlin: \"Kotlin\",\n      swift: \"Swift\"\n    },\n    filepath: \"/guides/checkout_webview/handling_redirect.js\",\n    mdxType: \"Tabs\"\n  }), mdx(\"p\", null, \"If you have webhooks implemented, a \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"charge.success\"), \" event will be sent to your webhook URL, and it's recommended you use this to deliver value to the customer in your backend. \"), mdx(\"p\", null, \"In your frontend, after detecting the WebView redirect to the callback URL, this means the transaction is successful. You can confirm the status by calling the \", mdx(ApiLink, {\n    title: \"Verify Transaction\",\n    path: \"transaction-verify\",\n    mdxType: \"ApiLink\"\n  }), \", and then you can programmatically close the WebView widget and show the customer a transaction confirmation page in your app. This is handled in the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"verifyTransaction()\"), \" method.  \"), mdx(\"h2\", {\n    \"id\": \"handling-3ds-properly\",\n    \"style\": {\n      \"position\": \"relative\"\n    }\n  }, mdx(\"a\", _extends({\n    parentName: \"h2\"\n  }, {\n    \"href\": \"#handling-3ds-properly\",\n    \"aria-label\": \"handling 3ds properly permalink\",\n    \"className\": \"anchor before\"\n  }), mdx(\"svg\", _extends({\n    parentName: \"a\"\n  }, {\n    \"aria-hidden\": \"true\",\n    \"focusable\": \"false\",\n    \"height\": \"16\",\n    \"version\": \"1.1\",\n    \"viewBox\": \"0 0 16 16\",\n    \"width\": \"16\"\n  }), mdx(\"path\", _extends({\n    parentName: \"svg\"\n  }, {\n    \"fillRule\": \"evenodd\",\n    \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n  })))), \"Handling 3DS properly\"), mdx(\"p\", null, \"For card transactions that require 3DS authentication, when the customer completes the authorization, they're redirected to \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"https://standard.paystack.co/close\"), \". Automatically, when the URL hits\\xA0\", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"https://standard.paystack.co/close\"), \", it should close the page. This is what happens on a web browser. \"), mdx(\"p\", null, \"With WebViews however, the page doesn't close automatically. This is because the Javascript function \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"window.close()\"), \", which closes the page in a browser window, won't work on a WebView. WebViews are native widgets and the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"window.close()\"), \" method can only close windows opened by using the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"window.open()\"), \" method. The workaround is to have your WebView listen for when the URL has been redirected to\\xA0 \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"https://standard.paystack.co/close\"), \"\\xA0and then continue processing as usual by checking the callback function and any other process.\"), mdx(Tabs, {\n    links: {\n      dart: \"Flutter\",\n      js: \"React Native\",\n      kotlin: \"Kotlin\",\n      swift: \"Swift\"\n    },\n    filepath: \"/guides/checkout_webview/handling_3ds.js\",\n    mdxType: \"Tabs\"\n  }));\n}\n;\nMDXContent.isMDXComponent = true;","tableOfContents":{"items":[{"url":"#introduction","title":"Introduction"},{"url":"#why-use-a-webview","title":"Why use a WebView?"},{"url":"#generating-the-checkout-url","title":"Generating the checkout URL"},{"url":"#displaying-checkout-in-your-webview","title":"Displaying Checkout in Your WebView"},{"url":"#handling-webview-redirects","title":"Handling WebView Redirects"},{"url":"#handling-3ds-properly","title":"Handling 3DS properly"}]},"fields":{"slug":"/guides/using_the_paystack_checkout_in_a_mobile_webview/"},"frontmatter":{"title":"Guides -  Using the Paystack Checkout in a Mobile WebView"}}},"pageContext":{"slug":"/guides/using_the_paystack_checkout_in_a_mobile_webview/"}},"staticQueryHashes":["2577489308"]}