"use strict";function sendDataToDrip(e,t,r){var o={workflow:"343685453",subscribers:[{email:e,tags:"subscribed via blog - ask",custom_fields:{first_name:t,blog_question:r}}]},i=new Request("https://tide-feast.glitch.me/subscribers",{method:"POST",mode:"cors",headers:new Headers({"Content-Type":"application/json"}),body:JSON.stringify(o)});return i}function sendDataToHelpscout(e){return fetch(apiURL+"/misc/website_contact_form",{method:"POST",body:e}).then(function(e){return e})}function sendDataAirtableSheet(e,t,r){var o={fields:{"First name":t,Email:e,Question:r}},i=new Request(airtableEndpoint+"?api_key="+airtablePublicKeys,{method:"POST",mode:"cors",headers:new Headers({"Content-Type":"application/json"}),body:JSON.stringify(o)});return i}function disableForm(e){for(var t=e.querySelectorAll("input"),r=0;r<t.length;r++)t[r].disabled=!0;e.querySelector("textarea").disabled=!0,e.querySelector(".button").disabled=!0}function enableForm(e){e.querySelector('.form__group input[type="email"]').disabled=!1,e.querySelector(".button").disabled=!1,e.querySelector('.form__group input[type="email"]').value=""}function buttonIsLoading(e){e.querySelector("button").classList.add("button--is-loading")}function isValidEmail(e){var t=/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;return t.test(e)}function printError(e){console.log("Error! The form could not be submited, please confirm your details and try again")}document.querySelector(".ask-section__form form").addEventListener("submit",function(e){var t=this;e.preventDefault();var r=document.querySelector(".ask-section__form form"),o="Question for Paystack",i=this.querySelector('.form__group input[type="email"]').value,n=this.querySelector(".form__group input#contactFirstName").value,a=this.querySelector("#question").value;disableForm(this);var s=new FormData(r);s.set("email",i),s.set("first_name",n),s.set("question",a),s.append("type","support"),s.append("subject",o),isValidEmail(i)?(buttonIsLoading(this),fetch(sendDataToDrip(i,n,a)).then(fetch(sendDataToHelpscout(s))["catch"](function(e){return console.error("Error: ",e)})).then(function(){return document.querySelector(".ask-section__form").classList.add("ask-section__form--submitted")})):(this.querySelector("button").classList.add("button--error"),setTimeout(function(){t.querySelector("button").classList.remove("button--error")},600),enableForm(this))});var airtableEndpoint=airtableEndpoint,airtablePublicKeys=airtablePublicKeys,apiURL=apiURL;